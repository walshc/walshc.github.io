<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.3.450">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>Statistics 2 2023/24 Exam</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
</style>


<script src="2023-exam_files/libs/clipboard/clipboard.min.js"></script>
<script src="2023-exam_files/libs/quarto-html/quarto.js"></script>
<script src="2023-exam_files/libs/quarto-html/popper.min.js"></script>
<script src="2023-exam_files/libs/quarto-html/tippy.umd.min.js"></script>
<script src="2023-exam_files/libs/quarto-html/anchor.min.js"></script>
<link href="2023-exam_files/libs/quarto-html/tippy.css" rel="stylesheet">
<link href="2023-exam_files/libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="2023-exam_files/libs/bootstrap/bootstrap.min.js"></script>
<link href="2023-exam_files/libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="2023-exam_files/libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">

  <script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
  <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml-full.js" type="text/javascript"></script>

</head>

<body class="fullcontent">

<div id="quarto-content" class="page-columns page-rows-contents page-layout-article">

<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">Statistics 2 2023/24 Exam</h1>
</div>



<div class="quarto-title-meta">

    
  
    
  </div>
  

</header>

<section id="introduction" class="level2 unnumbered">
<h2 class="unnumbered anchored" data-anchor-id="introduction">Introduction</h2>
<p>Chief Executive Officers (CEOs) of large companies often earn extremely large salaries, often hundreds of times the salaries of the company’s regular employees. These relative pay differences are often criticized. You are tasked with understanding which and how much different factors impact CEO compensation. You collect data on a random sample of <span class="math inline">\(n=132\)</span> CEOs from different companies in the year 1990. Your dataset contains the following variables:</p>
<ul>
<li><code>salary</code>: Annual CEO compensation in 1990, measured in thousands of dollars ($1000s).</li>
<li><code>age</code>: Age of CEO in years.</li>
<li><code>college</code>: Dummy variable which equals 1 if the CEO attended college and 0 otherwise.</li>
<li><code>grad</code>: Dummy variable which equals 1 if the CEO attended graduate school (post-graduate education, e.g.&nbsp;an MBA) and 0 otherwise.</li>
<li><code>comten</code>: Number of years the CEO has worked with the company.</li>
<li><code>ceoten</code>: Number of years the CEO has been the CEO in the company.</li>
<li><code>sales</code>: The total sales of the company in 1990, measured in millions of dollars ($1,000,000s).</li>
<li><code>profits</code>: The total profits of the company in 1990, measured in millions of dollars ($1,000,000s).</li>
<li><code>mktval</code>: The total market value of the company at the end of 1990, measured in millions of dollars ($1,000,000s).</li>
</ul>
<p>The dataset can be downloaded by clicking the following link: <a href="https://walshc.github.io/stats2/ceosal.csv">ceosal.csv</a></p>
<p>In the questions that follow, pay particular attention to the units of the variables. The salaries are measured thousands of dollars and sales, profits and market value are measured in millions of dollars.</p>
<section id="question-1" class="level4 unnumbered">
<h4 class="unnumbered anchored" data-anchor-id="question-1">Question 1</h4>
<p>Report the sample correlation coefficient between <code>salary</code> and <code>sales</code>.</p>
</section>
<section id="question-2" class="level4 unnumbered">
<h4 class="unnumbered anchored" data-anchor-id="question-2">Question 2</h4>
<p>The sample correlation coefficient between <code>salary</code> and <code>college</code> is -0.200. Choose the answer below which best represents the interpretation of this correlation coefficient.</p>
<ul>
<li>There is a weak negative linear relationship between CEO salary and having a college degree.</li>
<li>There is a weak positive linear relationship between CEO salary and having a college degree.</li>
<li>There is a very strong negative linear relationship between CEO salary and having a college degree.</li>
<li>There is a very strong positive linear relationship between CEO salary and having a college degree.</li>
<li>Obtaining a college degree on average decreases your salary by 200 dollars, holding everything else fixed.</li>
<li>Obtaining a college degree on average decreases your salary by 0.2 dollars, holding everything else fixed.</li>
</ul>
</section>
<section id="question-3" class="level4 unnumbered">
<h4 class="unnumbered anchored" data-anchor-id="question-3">Question 3</h4>
<p>Report the sample covariance between <code>salary</code> and <code>ceoten</code>.</p>
</section>
<section id="block-2" class="level3 unnumbered">
<h3 class="unnumbered anchored" data-anchor-id="block-2">Block 2</h3>
<p>Estimate a simple linear regression model explaining <code>salary</code> with <code>sales</code>. If you estimated the model correctly, your estimated constant term should be 542.063.</p>
<p>Use this model to answer the following questions.</p>
<section id="question-4" class="level4 unnumbered">
<h4 class="unnumbered anchored" data-anchor-id="question-4">Question 4</h4>
<p>Report the sample regression slope.</p>
</section>
<section id="question-5" class="level4 unnumbered">
<h4 class="unnumbered anchored" data-anchor-id="question-5">Question 5</h4>
<p>In a company with $1m more in sales, how much more do we expect CEOs in that company to earn (in dollars)?</p>
<p><strong>Note:</strong> Be careful with the units for both sales and CEO salary.</p>
</section>
<section id="question-6" class="level4 unnumbered">
<h4 class="unnumbered anchored" data-anchor-id="question-6">Question 6</h4>
<p>If we take the estimate of the regression intercept at face value, which of the options below best describes the interpretation of that estimate?</p>
<ul>
<li>In companies with zero sales, CEOs on average earn $542,063,000.00 per year.</li>
<li>In companies with zero sales, CEOs on average earn $542,063.00 per year.</li>
<li>In companies with zero sales, CEOs on average earn $542.06 per year.</li>
<li>Companies with CEOs with zero salaries on average have sales of $542,063,000.00 per year.</li>
<li>Companies with CEOs with zero salaries on average have sales of $542,063.00 per year.</li>
<li>Companies with CEOs with zero salaries on average have sales of $542.06 per year.</li>
</ul>
</section>
<section id="question-7" class="level4 unnumbered">
<h4 class="unnumbered anchored" data-anchor-id="question-7">Question 7</h4>
<p>The estimate from the previous question is unreliable. This is because:</p>
<ul>
<li>We do not observe any company with zero sales, or close to zero sales.</li>
<li>We do not observe any CEO with zero salary, or close to zero salary.</li>
<li>We do not observe any company where it has BOTH zero sales (or close to zero) AND a CEO with a zero salary (or close to zero).</li>
<li>The units of the y-data and the x-data differ. One is measured in millions, and the other is measured in thousands.</li>
</ul>
</section>
<section id="question-8" class="level4 unnumbered">
<h4 class="unnumbered anchored" data-anchor-id="question-8">Question 8</h4>
<p><em>Note:</em> This question involves inspecting the normality of the residuals with a plot, which we no longer do in this course starting in 2024.</p>
<p>Create some plots to visually inspect the model assumptions. Of the 4 options below, 3 contain clearly incorrect statements. Use your plots to choose the correct statement out of the 4 options:</p>
<ul>
<li>In a scatter plot of the residuals against sales, the residuals are above and below zero for both small and large values of sales. Therefore, the homoskedasticity assumption is not violated.</li>
<li>In a scatter plot of the residuals against salary, we observe that the average residuals are negative for low values of salary, and positive for large values of salary. Therefore the linearity assumption is violated.</li>
<li>Comparing a histogram of the residuals against a fitted normal curve we observe a significant deviation, as the residuals are positively skewed. Therefore the normality assumption is violated.</li>
<li>In a line plot of the residuals against the case number, we do not observe any distinguishing patterns. Therefore the independence assumption is violated.</li>
</ul>
</section>
<section id="question-9" class="level4 unnumbered">
<h4 class="unnumbered anchored" data-anchor-id="question-9">Question 9</h4>
<p>Run a regression of the squared residuals against sales to formally test the homoskedasticity assumption. Use a 5% level for the test.</p>
<p>What is the null hypothesis? Choose one of the following options:</p>
<ul>
<li>There is no heteroskedasticity.</li>
<li>There is heteroskedasticity.</li>
</ul>
<p>What is the <span class="math inline">\(p\)</span>-value of the test?</p>
<p>What is the conclusion of the test? Choose one of the following options:</p>
<ul>
<li>There is not sufficient evidence to conclude that there is heteroskedasticity.</li>
<li>There is sufficient evidence to conclude that there is heteroskedasticity.</li>
<li>There is not sufficient evidence to conclude that there is homoskedasticity.</li>
<li>There is sufficient evidence to conclude that there is homoskedasticity.</li>
</ul>
</section>
</section>
<section id="block-3-salary-and-profits" class="level3 unnumbered">
<h3 class="unnumbered anchored" data-anchor-id="block-3-salary-and-profits">Block 3: Salary and Profits</h3>
<p>Estimate a simple linear regression model explaining <code>salary</code> with <code>profits</code>. If you estimated the model correctly, your estimated constant term should be 588.959</p>
<p>Use this model to answer the following questions.</p>
<section id="question-10" class="level4 unnumbered">
<h4 class="unnumbered anchored" data-anchor-id="question-10">Question 10</h4>
<p>Use the model to test the following claim:</p>
<p>“If a CEO can increase a company’s profits by $1m, on average they get an increase in salary of more than $1,000.”</p>
<p>Use a 5% significance level for your test.</p>
<ul>
<li><p>What is the null hypothesis? <span class="math inline">\(\beta_1\)</span> <span class="math inline">\(&lt;/\leq/&gt;/\geq/=/\neq\)</span> <span class="math inline">\(\underline{\hspace{20mm}}\)</span> (choose one comparison operator and fill in a value in the blank).</p></li>
<li><p>What is the alternative hypothesis? <span class="math inline">\(\beta_1\)</span> <span class="math inline">\(&lt;/\leq/&gt;/\geq/=/\neq\)</span> <span class="math inline">\(\underline{\hspace{20mm}}\)</span> (choose one comparison operator and fill in a value in the blank).</p></li>
<li><p>Under the null hypothesis, the test statistic <span class="math inline">\(T\)</span> follows a <span class="math inline">\(t\)</span> distribution with how many degrees of freedom? <span class="math inline">\(\underline{\hspace{20mm}}\)</span></p></li>
<li><p>What is the value of the test statistic? <span class="math inline">\(\underline{\hspace{20mm}}\)</span></p></li>
<li><p>What is the associated <span class="math inline">\(p\)</span>-value? <span class="math inline">\(\underline{\hspace{20mm}}\)</span></p></li>
<li><p>What is your conclusion? Choose an option below:</p>
<ul>
<li>Reject H0: There is sufficient evidence for the claim.</li>
<li>Reject H1: There is sufficient evidence for the claim.</li>
<li>Reject H0: There is not sufficient evidence for the claim.</li>
<li>Reject H1: There is not sufficient evidence for the claim.</li>
<li>Don’t reject H0: There is sufficient evidence for the claim.</li>
<li>Don’t reject H1: There is sufficient evidence for the claim.</li>
<li>Don’t reject H0: There is not sufficient evidence for the claim.</li>
<li>Don’t reject H1: There is not sufficient evidence for the claim.</li>
</ul></li>
</ul>
</section>
<section id="question-11" class="level4 unnumbered">
<h4 class="unnumbered anchored" data-anchor-id="question-11">Question 11</h4>
<p>Construct a 95% confidence interval for the coefficient on profits. Report the lower bound and upper bound of this interval below:</p>
<ul>
<li>Lower bound: <span class="math inline">\(\underline{\hspace{20mm}}\)</span></li>
<li>Upper bound: <span class="math inline">\(\underline{\hspace{20mm}}\)</span></li>
</ul>
</section>
<section id="question-12" class="level4 unnumbered">
<h4 class="unnumbered anchored" data-anchor-id="question-12">Question 12</h4>
<p>The 95% confidence interval for the intercept is <span class="math inline">\([507.666, 670.253]\)</span>.</p>
<p>Insert the blanks in the interpretation of this confidence interval below. Take note of the units of the variables when writing your answer.</p>
<p>We are <span class="math inline">\(\underline{\hspace{20mm}}\)</span>% confident that the population mean salary of CEOs in companies with profits of <span class="math inline">\(\underline{\hspace{20mm}}\)</span> is between <span class="math inline">\(\$\underline{\hspace{20mm}}\)</span> and <span class="math inline">\(\$\underline{\hspace{20mm}}\)</span></p>
<p>Write your answer in dollars, taking note that the salary variable is measured in thousands of dollars.</p>
</section>
<section id="block-4" class="level4 unnumbered">
<h4 class="unnumbered anchored" data-anchor-id="block-4">Block 4</h4>
<p>Create an interaction term called <code>gradsales</code> which multiplies the variables <code>grad</code> and <code>sales</code> by each other. Then use this to estimate a regression model explaining salary with the following three variables:</p>
<ul>
<li><code>grad</code></li>
<li><code>sales</code></li>
<li><code>gradsales</code></li>
</ul>
<p>If you estimated the model correctly, your estimated model intercept should be 614.916.</p>
</section>
<section id="question-13" class="level4 unnumbered">
<h4 class="unnumbered anchored" data-anchor-id="question-13">Question 13</h4>
<p>For companies with $1m more in sales, on average CEOs without graduate school education earn how much more (in dollars)?</p>
</section>
<section id="question-14" class="level4 unnumbered">
<h4 class="unnumbered anchored" data-anchor-id="question-14">Question 14</h4>
<p>For companies with $1m more in sales, on average CEOs with graduate school education earn how much more (in dollars)?</p>
</section>
</section>
<section id="block-5" class="level3 unnumbered">
<h3 class="unnumbered anchored" data-anchor-id="block-5">Block 5</h3>
<p>Estimate a simple linear regression model explaining salary with the following 4 variables:</p>
<ul>
<li><code>sales</code></li>
<li><code>mktval</code></li>
<li><code>comten</code></li>
<li><code>ceoten</code></li>
</ul>
<p>If you estimated the model correctly, your estimate of the intercept should be 490.217.</p>
<section id="question-15" class="level4 unnumbered">
<h4 class="unnumbered anchored" data-anchor-id="question-15">Question 15</h4>
<p>Which variables are individually significant at the 5% level?</p>
</section>
<section id="question-16" class="level4 unnumbered">
<h4 class="unnumbered anchored" data-anchor-id="question-16">Question 16</h4>
<p>What proportion of the variation in the data on salary is left unexplained by your model? Note that proportions are between 0 and 1, so your answer should be between 0 and 1.</p>
</section>
<section id="question-17" class="level4 unnumbered">
<h4 class="unnumbered anchored" data-anchor-id="question-17">Question 17</h4>
<p>Perform an appropriate hypothesis test to test the usefulness of the model. Use a 5% significance level.</p>
<ul>
<li><p>The null hypothesis is that <em>at least one/all/none</em> (choose one) of <span class="math inline">\(\beta_j\)</span> <span class="math inline">\(&lt;/\leq/&gt;/\geq/=/\neq\)</span> <span class="math inline">\(\underline{\hspace{20mm}}\)</span> for <span class="math inline">\(j=\)</span> <span class="math inline">\(\underline{\hspace{20mm}}\)</span> to <span class="math inline">\(\underline{\hspace{20mm}}\)</span> (choose one comparison operator and fill in values in the blank spaces).</p></li>
<li><p>The alternative hypothesis is that <em>at least one/all/none</em> (choose one) of <span class="math inline">\(\beta_j\)</span> <span class="math inline">\(&lt;/\leq/&gt;/\geq/=/\neq\)</span> <span class="math inline">\(\underline{\hspace{20mm}}\)</span> for the same <span class="math inline">\(j\)</span> (choose one comparison operator and fill in a value in in the blank space).</p></li>
<li><p>The formula for the test statistic is of the form: <span class="math display">\[
\frac{Z/k}{SSE/(n-k-1)}
\]</span> What is the value of Z in the estimated model? <span class="math inline">\(\underline{\hspace{20mm}}\)</span></p></li>
<li><p>What is the value of the test statistic? <span class="math inline">\(\underline{\hspace{20mm}}\)</span></p></li>
<li><p>What is the critical value? <span class="math inline">\(\underline{\hspace{20mm}}\)</span></p></li>
<li><p>What is the conclusion? Choose one of the options below.</p>
<ul>
<li>Reject H0. The model is useful.</li>
<li>Reject H0. The model is useless.</li>
<li>Don’t reject H0. The model is useful.</li>
<li>Don’t reject H0. The model is useless.</li>
</ul></li>
</ul>
</section>
<section id="question-18" class="level4 unnumbered">
<h4 class="unnumbered anchored" data-anchor-id="question-18">Question 18</h4>
<p>Test the joint usefulness of <code>comten</code> and <code>ceoten</code>. Use a 5% significance level. Note that these variables are the 3rd and 4th variables in your model.</p>
<ul>
<li><p>The null hypothesis is that <em>at least one/all/none</em> (choose one) of <span class="math inline">\(\beta_j\)</span> <span class="math inline">\(&lt;/\leq/&gt;/\geq/=/\neq\)</span> <span class="math inline">\(\underline{\hspace{20mm}}\)</span> for <span class="math inline">\(j=\)</span> <span class="math inline">\(\underline{\hspace{20mm}}\)</span> to <span class="math inline">\(\underline{\hspace{20mm}}\)</span> (choose one comparison operator and fill in values in the blank spaces).</p></li>
<li><p>The alternative hypothesis is that <em>at least one/all/none</em> (choose one) of <span class="math inline">\(\beta_j\)</span> <span class="math inline">\(&lt;/\leq/&gt;/\geq/=/\neq\)</span> <span class="math inline">\(\underline{\hspace{20mm}}\)</span> for the same <span class="math inline">\(j\)</span> (choose one comparison operator and fill in a value in in the blank space).</p></li>
<li><p>According to the null hypothesis, the test statistic follows an <span class="math inline">\(F\)</span> distribution with <span class="math inline">\(\underline{\hspace{20mm}}\)</span> numerator and <span class="math inline">\(\underline{\hspace{20mm}}\)</span> denominator degrees of freedom.</p></li>
<li><p>What is the value of the test statistic? <span class="math inline">\(\underline{\hspace{20mm}}\)</span></p></li>
<li><p>What is the critical value? <span class="math inline">\(\underline{\hspace{20mm}}\)</span></p></li>
<li><p>What is the conclusion? Choose one of the options below.</p>
<ul>
<li>Reject H0. The variables are useful additions to the model.</li>
<li>Reject H0. The variables are useless additions to the model.</li>
<li>Don’t reject H0. The variables are useful additions to the model.</li>
<li>Don’t reject H0. The variables are useless additions to the model.</li>
</ul></li>
</ul>
</section>
<section id="question-19" class="level4 unnumbered">
<h4 class="unnumbered anchored" data-anchor-id="question-19">Question 19</h4>
<p>Using the model, provide a 95% confidence interval for the mean salary of CEOs (in dollars) with the following characteristics:</p>
<ul>
<li><p>They have been working in their company for 20 years, and have been a CEO there for 8 of those years.</p></li>
<li><p>The companies they work for have annual sales of $1,000m and a market value of $1,500m.</p></li>
<li><p>Lower bound: <span class="math inline">\(\underline{\hspace{20mm}}\)</span></p></li>
<li><p>Upper bound: <span class="math inline">\(\underline{\hspace{20mm}}\)</span></p></li>
</ul>
</section>
</section>
</section>

</main>
<!-- /main column -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    text: function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->



</body></html>